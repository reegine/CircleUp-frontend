<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Tennis Prasmul - Chat</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'Poppins',sans-serif;background:#f5f5f5;display:flex;overflow:hidden;color:#333}

    #sidebar-container,#right-sidebar-container{flex-shrink:0}
    .main-container{display:flex;flex:1;height:100vh;overflow:hidden}

    /* ========== CHAT LAYOUT ========== */
    .chat-container{flex:1;display:flex;flex-direction:column;background:#fff}
    .chat-header{
      padding:20px 30px;background:#f5f5f5;border-bottom:1px solid #e0e0e0;
      display:flex;align-items:center;justify-content:space-between
    }
    .chat-title{font-size:18px;font-weight:600}
    .chat-stats{font-size:13px;color:#888;margin-left:10px}

    /* body = 2 kolom: left rail + messages */
    .chat-body{flex:1;display:flex;min-height:0;background:#fff}

    /* ===== LEFT MEDIA RAIL (lebih besar) ===== */
    .left-rail{
      width:140px;background:#fff;border-right:1px solid #eee;padding:16px 10px;
      overflow-y:auto
    }
    .left-rail::-webkit-scrollbar{width:8px}
    .left-rail::-webkit-scrollbar-thumb{background:#e4e4e4;border-radius:8px}

    .rail-item{
      display:flex;align-items:center;gap:10px;margin-bottom:16px;
      border-radius:16px;padding:10px;background:#f6f6f6;cursor:pointer;
      transition:transform .15s, box-shadow .15s, background-color .15s
    }
    .rail-item:hover{transform:translateY(-1px);box-shadow:0 2px 8px rgba(0,0,0,.06);background:#fff}
    .rail-thumb{
      width:112px;height:72px;border-radius:12px;object-fit:cover;flex-shrink:0
    }
    .rail-label{display:none} /* munculkan kalau perlu */

    /* ===== MESSAGES COLUMN ===== */
    .messages-wrap{flex:1;display:flex;flex-direction:column;min-width:0}
    .chat-messages{flex:1;overflow-y:auto;padding:20px 30px;background:#fff}

    .message{margin-bottom:26px;position:relative;padding-right:56px} /* ruang untuk actions kanan */
    .message-header{display:flex;align-items:center;gap:12px;margin-bottom:8px}
    .message-avatar{width:40px;height:40px;border-radius:50%;object-fit:cover}
    .message-author{font-size:15px;font-weight:600}
    .message-time{font-size:12px;color:#888;margin-left:8px}

    .message-content{
      margin-left:52px;font-size:14px;line-height:1.5;color:#333;background:#f5f5f5;
      padding:12px 16px;border-radius:12px;display:inline-block;max-width:80%;position:relative
    }

    .message-link{
      margin-left:52px;margin-top:8px;padding:15px;background:#f5f5f5;border-left:4px solid #5865f2;border-radius:8px;max-width:520px
    }
    .link-title{font-size:14px;font-weight:600;color:#5865f2;margin-bottom:5px}
    .link-description{font-size:13px;color:#555;margin-bottom:8px}
    .link-url{font-size:12px;color:#5865f2;text-decoration:none;word-break:break-all}

    .message-reactions{margin-left:52px;margin-top:8px;display:flex;gap:8px;flex-wrap:wrap}
    .reaction{
      display:inline-flex;align-items:center;gap:5px;padding:5px 10px;background:#f5f5f5;border-radius:12px;
      font-size:14px;cursor:pointer;transition:background-color .2s
    }
    .reaction:hover{background:#e0e0e0}
    .reaction.reacted{background:#fff3e0;border:1px solid #e59d2c}

    /* ===== ACTIONS di pinggir bubble ===== */
    .message-actions{
      position:absolute;right:6px;top:50%;transform:translateY(-50%);
      display:flex;gap:6px;opacity:0;pointer-events:none;transition:opacity .15s
    }
    .message:hover .message-actions,
    .message:focus-within .message-actions{opacity:1;pointer-events:auto}

    .action-btn{
      width:32px;height:32px;border-radius:999px;background:#fff;border:1px solid #e0e0e0;
      display:flex;align-items:center;justify-content:center;cursor:pointer;
      box-shadow:0 2px 6px rgba(0,0,0,.04);transition:background-color .15s,border-color .15s
    }
    .action-btn:hover{background:#f8f8f8;border-color:#d7d7d7}
    .action-btn svg{width:16px;height:16px;fill:#555}

    .reaction-picker{
      position:absolute;left:52px;bottom:-6px;transform:translateY(100%);
      background:#fff;border-radius:25px;box-shadow:0 8px 24px rgba(0,0,0,.15);
      padding:8px 12px;display:none;z-index:50
    }
    .reaction-picker.show{display:flex;gap:8px}
    .reaction-picker-item{font-size:22px;cursor:pointer;padding:4px;border-radius:8px;transition:transform .15s}
    .reaction-picker-item:hover{transform:scale(1.2)}

    .more-menu{
      position:absolute;right:6px;top:calc(50% + 22px);
      background:#fff;border-radius:10px;box-shadow:0 12px 30px rgba(0,0,0,.15);padding:8px;display:none;z-index:60;min-width:160px
    }
    .more-menu.show{display:block}
    .more-menu-item{
      padding:10px 12px;font-size:14px;color:#333;border-radius:8px;cursor:pointer;display:flex;align-items:center;gap:10px;transition:background .12s
    }
    .more-menu-item:hover{background:#f6f6f6}
    .more-menu-item.danger{color:#e74c3c}
    .more-menu-item svg{width:16px;height:16px;fill:currentColor}

    /* ===== INPUT ===== */
    .chat-input-container{
      padding:20px 30px;background:#fff;border-top:1px solid #e0e0e0;display:flex;align-items:center;gap:15px
    }
    .add-btn,.send-btn{
      width:40px;height:40px;border-radius:999px;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center
    }
    .add-btn{background:#e59d2c}
    .add-btn svg{width:24px;height:24px;fill:#fff}
    .send-btn{background:#e59d2c}
    .send-btn svg{width:20px;height:20px;fill:#fff}

    /* === Input dengan emoji di dalam === */
    .input-box{
      position:relative;
      flex:1;
      display:flex;
    }
    .chat-input{
      flex:1;
      padding:12px 56px 12px 20px; /* ruang untuk tombol emoji di kanan */
      border:none;background:#f5f5f5;border-radius:25px;font-size:14px;outline:none
    }
    .emoji-inside{
      position:absolute;right:8px;top:50%;transform:translateY(-50%);
      width:36px;height:36px;border-radius:50%;border:none;background:#fff;
      display:flex;align-items:center;justify-content:center;cursor:pointer;
      box-shadow:0 1px 4px rgba(0,0,0,.08)
    }
    .emoji-inside svg{width:20px;height:20px;fill:#555}

    /* picker nempel ke input */
    .input-box .emoji-picker{
      position:absolute;
      bottom:calc(100% + 8px); /* muncul di atas input; ubah ke top jika mau di bawah */
      right:6px;
      background:#fff;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.15);
      padding:15px;display:none;z-index:100
    }
    .input-box .emoji-picker.show{display:block}
    .emoji-grid{display:grid;grid-template-columns:repeat(6,1fr);gap:8px}
    .emoji-item{font-size:24px;cursor:pointer;padding:5px;border-radius:6px;text-align:center;transition:background-color .2s}
    .emoji-item:hover{background:#f5f5f5}

    /* posisi actions untuk kartu link */
    .message-link + .message-actions{top:auto;bottom:6px;transform:none}
  </style>
</head>
<body>
  <div id="sidebar-container"></div>

  <div class="main-container">
    <div class="chat-container">
      <div class="chat-header">
        <div>
          <span class="chat-title">Tennis Prasmul</span>
          <span class="chat-stats">‚Ä¢ 260 Members, 128 Online</span>
        </div>
      </div>

      <!-- ===== BODY: Left Rail + Messages ===== -->
      <div class="chat-body">
        <!-- Left media rail -->
        <aside class="left-rail" id="leftRail"></aside>

        <!-- Messages column -->
        <div class="messages-wrap">
          <div class="chat-messages" id="chatMessages">
            <!-- MESSAGE 1 -->
            <div class="message" data-message-id="1">
              <div class="message-header">
                <img src="https://i.pravatar.cc/150?img=1" alt="Frog Planet" class="message-avatar">
                <span class="message-author">Frog Planet</span>
                <span class="message-time">8/22/25, 8:55 PM</span>
              </div>
              <div class="message-content">Ladies and gentlemen, we have liftoff</div>

              <div class="message-actions">
                <button class="action-btn" onclick="showReactionPicker(event,1)" title="React">
                  <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"/></svg>
                </button>
                <button class="action-btn" onclick="showMoreMenu(event,1)" title="More">
                  <svg viewBox="0 0 24 24"><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>
                </button>
              </div>

              <div class="reaction-picker" id="reactionPicker1">
                <span class="reaction-picker-item" onclick="addReaction(1,'‚ù§Ô∏è')">‚ù§Ô∏è</span>
                <span class="reaction-picker-item" onclick="addReaction(1,'üëç')">üëç</span>
                <span class="reaction-picker-item" onclick="addReaction(1,'üëé')">üëé</span>
                <span class="reaction-picker-item" onclick="addReaction(1,'üòÇ')">üòÇ</span>
                <span class="reaction-picker-item" onclick="addReaction(1,'üò¢')">üò¢</span>
                <span class="reaction-picker-item" onclick="addReaction(1,'üòä')">üòä</span>
              </div>

              <div class="more-menu" id="moreMenu1">
                <div class="more-menu-item" onclick="replyMessage(1)">
                  <svg viewBox="0 0 24 24"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"/></svg>
                  Reply
                </div>
                <div class="more-menu-item" onclick="editMessage(1)">
                  <svg viewBox="0 0 24 24"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg>
                  Edit
                </div>
                <div class="more-menu-item" onclick="pinMessage(1)">
                  <svg viewBox="0 0 24 24"><path d="M16 9V4h1c.55 0 1-.45 1-1s-.45-1-1-1H7c-.55 0-1 .45-1 1s.45 1 1 1h1v5c0 1.66-1.34 3-3 3v2h5.97v7l1 1 1-1v-7H19v-2c-1.66 0-3-1.34-3-3z"/></svg>
                  Pin
                </div>
                <div class="more-menu-item danger" onclick="deleteMessage(1)">
                  <svg viewBox="0 0 24 24"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/></svg>
                  Delete
                </div>
              </div>
            </div>

            <!-- MESSAGE 2 -->
            <div class="message" data-message-id="2">
              <div class="message-header">
                <img src="https://i.pravatar.cc/150?img=2" alt="Space Cadet" class="message-avatar">
                <span class="message-author">Space Cadet</span>
                <span class="message-time">8/22/25, 8:55 PM</span>
              </div>
              <div class="message-content">They ain't in space yet</div>

              <div class="message-actions">
                <button class="action-btn" onclick="showReactionPicker(event,2)" title="React">
                  <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"/></svg>
                </button>
                <button class="action-btn" onclick="showMoreMenu(event,2)" title="More">
                  <svg viewBox="0 0 24 24"><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>
                </button>
              </div>

              <div class="message-reactions">
                <span class="reaction reacted" onclick="toggleReaction(this)">‚ù§Ô∏è 2</span>
                <span class="reaction" onclick="toggleReaction(this)">üëç 1</span>
                <span class="reaction" onclick="toggleReaction(this)">üòä</span>
              </div>

              <div class="reaction-picker" id="reactionPicker2">
                <span class="reaction-picker-item" onclick="addReaction(2,'‚ù§Ô∏è')">‚ù§Ô∏è</span>
                <span class="reaction-picker-item" onclick="addReaction(2,'üëç')">üëç</span>
                <span class="reaction-picker-item" onclick="addReaction(2,'üëé')">üëé</span>
                <span class="reaction-picker-item" onclick="addReaction(2,'üòÇ')">üòÇ</span>
                <span class="reaction-picker-item" onclick="addReaction(2,'üò¢')">üò¢</span>
                <span class="reaction-picker-item" onclick="addReaction(2,'üòä')">üòä</span>
              </div>

              <div class="more-menu" id="moreMenu2">
                <div class="more-menu-item" onclick="replyMessage(2)">
                  <svg viewBox="0 0 24 24"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"/></svg>
                  Reply
                </div>
                <div class="more-menu-item" onclick="editMessage(2)">
                  <svg viewBox="0 0 24 24"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg>
                  Edit
                </div>
                <div class="more-menu-item" onclick="pinMessage(2)">
                  <svg viewBox="0 0 24 24"><path d="M16 9V4h1c.55 0 1-.45 1-1s-.45-1-1-1H7c-.55 0-1 .45-1 1s.45 1 1 1h1v5c0 1.66-1.34 3-3 3v2h5.97v7l1 1 1-1v-7H19v-2c-1.66 0-3-1.34-3-3z"/></svg>
                  Pin
                </div>
                <div class="more-menu-item danger" onclick="deleteMessage(2)">
                  <svg viewBox="0 0 24 24"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/></svg>
                  Delete
                </div>
              </div>
            </div>

            <!-- MESSAGE 3 -->
            <div class="message" data-message-id="3">
              <div class="message-header">
                <img src="https://i.pravatar.cc/150?img=2" alt="Space Cadet" class="message-avatar">
                <span class="message-author">Space Cadet</span>
                <span class="message-time">8/22/25, 8:55 PM</span>
              </div>
              <div class="message-content">Yep, Cape Canaveral!</div>

              <div class="message-actions">
                <button class="action-btn" onclick="showReactionPicker(event,3)" title="React">
                  <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"/></svg>
                </button>
                <button class="action-btn" onclick="showMoreMenu(event,3)" title="More">
                  <svg viewBox="0 0 24 24"><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>
                </button>
              </div>

              <div class="message-reactions">
                <span class="reaction" onclick="toggleReaction(this)">üòä</span>
              </div>

              <div class="reaction-picker" id="reactionPicker3">
                <span class="reaction-picker-item" onclick="addReaction(3,'‚ù§Ô∏è')">‚ù§Ô∏è</span>
                <span class="reaction-picker-item" onclick="addReaction(3,'üëç')">üëç</span>
                <span class="reaction-picker-item" onclick="addReaction(3,'üëé')">üëé</span>
                <span class="reaction-picker-item" onclick="addReaction(3,'üòÇ')">üòÇ</span>
                <span class="reaction-picker-item" onclick="addReaction(3,'üò¢')">üò¢</span>
                <span class="reaction-picker-item" onclick="addReaction(3,'üòä')">üòä</span>
              </div>

              <div class="more-menu" id="moreMenu3">
                <div class="more-menu-item" onclick="replyMessage(3)">
                  <svg viewBox="0 0 24 24"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"/></svg>
                  Reply
                </div>
                <div class="more-menu-item" onclick="editMessage(3)">
                  <svg viewBox="0 0 24 24"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg>
                  Edit
                </div>
                <div class="more-menu-item" onclick="pinMessage(3)">
                  <svg viewBox="0 0 24 24"><path d="M16 9V4h1c.55 0 1-.45 1-1s-.45-1-1-1H7c-.55 0-1 .45-1 1s.45 1 1 1h1v5c0 1.66-1.34 3-3 3v2h5.97v7l1 1 1-1v-7H19v-2c-1.66 0-3-1.34-3-3z"/></svg>
                  Pin
                </div>
                <div class="more-menu-item danger" onclick="deleteMessage(3)">
                  <svg viewBox="0 0 24 24"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/></svg>
                  Delete
                </div>
              </div>
            </div>

            <!-- MESSAGE 4 -->
            <div class="message" data-message-id="4">
              <div class="message-header">
                <img src="https://i.pravatar.cc/150?img=3" alt="Moon Boots" class="message-avatar">
                <span class="message-author">Moon Boots</span>
                <span class="message-time">8/22/25, 8:55 PM</span>
              </div>

              <div class="message-link">
                <div class="link-title">NASA</div>
                <div class="link-description">NASA Launch Schedule<br/>Upcoming launches and landings of crew members to and from the international space station.</div>
                <a href="#" class="link-url">https://www.reddit.com/r/space/comments/mysioy/video_shows_how_high_you_would_be_able_to_jump_on/</a>
              </div>

              <div class="message-actions">
                <button class="action-btn" onclick="showReactionPicker(event,4)" title="React">
                  <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"/></svg>
                </button>
                <button class="action-btn" onclick="showMoreMenu(event,4)" title="More">
                  <svg viewBox="0 0 24 24"><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>
                </button>
              </div>

              <div class="reaction-picker" id="reactionPicker4">
                <span class="reaction-picker-item" onclick="addReaction(4,'‚ù§Ô∏è')">‚ù§Ô∏è</span>
                <span class="reaction-picker-item" onclick="addReaction(4,'üëç')">üëç</span>
                <span class="reaction-picker-item" onclick="addReaction(4,'üëé')">üëé</span>
                <span class="reaction-picker-item" onclick="addReaction(4,'üòÇ')">üòÇ</span>
                <span class="reaction-picker-item" onclick="addReaction(4,'üò¢')">üò¢</span>
                <span class="reaction-picker-item" onclick="addReaction(4,'üòä')">üòä</span>
              </div>

              <div class="more-menu" id="moreMenu4">
                <div class="more-menu-item" onclick="replyMessage(4)">
                  <svg viewBox="0 0 24 24"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"/></svg>
                  Reply
                </div>
                <div class="more-menu-item" onclick="editMessage(4)">
                  <svg viewBox="0 0 24 24"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg>
                  Edit
                </div>
                <div class="more-menu-item" onclick="pinMessage(4)">
                  <svg viewBox="0 0 24 24"><path d="M16 9V4h1c.55 0 1-.45 1-1s-.45-1-1-1H7c-.55 0-1 .45-1 1s.45 1 1 1h1v5c0 1.66-1.34 3-3 3v2h5.97v7l1 1 1-1v-7H19v-2c-1.66 0-3-1.34-3-3z"/></svg>
                  Pin
                </div>
                <div class="more-menu-item danger" onclick="deleteMessage(4)">
                  <svg viewBox="0 0 24 24"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/></svg>
                  Delete
                </div>
              </div>
            </div>
          </div>

          <!-- Input -->
          <div class="chat-input-container">
            <button class="add-btn">
              <svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
            </button>

            <!-- Input dengan emoji di dalam -->
            <div class="input-box">
              <input type="text" class="chat-input" placeholder="Type your message" id="messageInput">
              <button class="emoji-inside" onclick="toggleEmojiPicker()" aria-label="Emoji">
                <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"/></svg>
              </button>

              <!-- Pindahkan picker ke dalam input-box -->
              <div class="emoji-picker" id="emojiPicker">
                <div class="emoji-grid">
                  <span class="emoji-item" onclick="insertEmoji('üòä')">üòä</span>
                  <span class="emoji-item" onclick="insertEmoji('üòÇ')">üòÇ</span>
                  <span class="emoji-item" onclick="insertEmoji('‚ù§Ô∏è')">‚ù§Ô∏è</span>
                  <span class="emoji-item" onclick="insertEmoji('üëç')">üëç</span>
                  <span class="emoji-item" onclick="insertEmoji('üëé')">üëé</span>
                  <span class="emoji-item" onclick="insertEmoji('üò¢')">üò¢</span>
                  <span class="emoji-item" onclick="insertEmoji('üéâ')">üéâ</span>
                  <span class="emoji-item" onclick="insertEmoji('üî•')">üî•</span>
                  <span class="emoji-item" onclick="insertEmoji('‚≠ê')">‚≠ê</span>
                  <span class="emoji-item" onclick="insertEmoji('üíØ')">üíØ</span>
                  <span class="emoji-item" onclick="insertEmoji('üôå')">üôå</span>
                  <span class="emoji-item" onclick="insertEmoji('üëè')">üëè</span>
                </div>
              </div>
            </div>

            <button class="send-btn" onclick="sendMessage()">
              <svg viewBox="0 0 24 24"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
            </button>
          </div>
        </div>
      </div>
    </div>

    <div id="right-sidebar-container"></div>
  </div>

  <script>
    // Load sidebars (opsional; biarkan kalau file ada)
    fetch('sidebar.html').then(r=>r.text()).then(t=>{document.getElementById('sidebar-container').innerHTML=t})
      .catch(()=>{});
    fetch('right-sidebar.html').then(r=>r.text()).then(t=>{document.getElementById('right-sidebar-container').innerHTML=t})
      .catch(()=>{});

    // ----- Left Rail data (ubah sesuai kebutuhan) -----
    const LEFT_RAIL_ITEMS = [
      {img:'https://images.unsplash.com/photo-1520975922215-230d636f4a59?q=80&w=600&auto=format&fit=crop', label:'Tennis Prasmul'},
      {img:'https://images.unsplash.com/photo-1517976487492-576ea6b2936d?q=80&w=600&auto=format&fit=crop', label:'Tennis Prasmul'},
      {img:'https://images.unsplash.com/photo-1482192505345-5655af888cc4?q=80&w=600&auto=format&fit=crop', label:'Tennis Prasmul'},
      {img:'https://images.unsplash.com/photo-1462332420958-a05d1e002413?q=80&w=600&auto=format&fit=crop', label:'Tennis Prasmul'},
      {img:'https://images.unsplash.com/photo-1504384308090-c894fdcc538d?q=80&w=600&auto=format&fit=crop', label:'Tennis Prasmul'},
      {img:'https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?q=80&w=600&auto=format&fit=crop', label:'Tennis Prasmul'},
      {img:'https://images.unsplash.com/photo-1504384308090-c894fdcc538d?q=80&w=600&auto=format&fit=crop', label:'Tennis Prasmul'},
    ];
    document.getElementById('leftRail').innerHTML = LEFT_RAIL_ITEMS.map(item=>`
      <div class="rail-item" title="${item.label}">
        <img class="rail-thumb" src="${item.img}" alt="${item.label}">
        <span class="rail-label">${item.label}</span>
      </div>
    `).join('');

    // ----- Emoji picker (input) -----
    function toggleEmojiPicker(){
      document.getElementById('emojiPicker').classList.toggle('show');
    }
    function insertEmoji(emoji){
      const input=document.getElementById('messageInput');
      input.value+=emoji;input.focus();
    }

    // ----- Reactions & Menus -----
    function closeAllOverlays(){
      document.querySelectorAll('.more-menu').forEach(m=>m.classList.remove('show'));
      document.querySelectorAll('.reaction-picker').forEach(p=>p.classList.remove('show'));
    }
    function showReactionPicker(evt,id){
      closeAllOverlays();
      document.getElementById('reactionPicker'+id).classList.add('show');
      evt.stopPropagation();
    }
    function showMoreMenu(evt,id){
      closeAllOverlays();
      document.getElementById('moreMenu'+id).classList.add('show');
      evt.stopPropagation();
    }
    function addReaction(id,emoji){
      const msg=document.querySelector(`[data-message-id="${id}"]`);
      let wrap=msg.querySelector('.message-reactions');
      if(!wrap){
        wrap=document.createElement('div');
        wrap.className='message-reactions';
        const content=msg.querySelector('.message-content')||msg.querySelector('.message-link');
        content.after(wrap);
      }
      const existing=[...wrap.querySelectorAll('.reaction')];
      let found=false;
      existing.forEach(r=>{
        if(r.textContent.trim().startsWith(emoji)){
          found=true;
          const match=r.textContent.match(/\d+/);
          const count=match?parseInt(match[0],10)+1:2;
          r.textContent=`${emoji} ${count}`;
          r.classList.add('reacted');
        }
      });
      if(!found){
        const el=document.createElement('span');
        el.className='reaction reacted';
        el.textContent=`${emoji} 1`;
        el.onclick=function(){toggleReaction(this)};
        wrap.appendChild(el);
      }
      document.getElementById('reactionPicker'+id).classList.remove('show');
    }
    function toggleReaction(el){el.classList.toggle('reacted')}
    function replyMessage(id){alert('Reply to message '+id);closeAllOverlays()}
    function editMessage(id){alert('Edit message '+id);closeAllOverlays()}
    function pinMessage(id){alert('Pin message '+id);closeAllOverlays()}
    function deleteMessage(id){
      if(confirm('Are you sure you want to delete this message?')){
        const m=document.querySelector(`[data-message-id="${id}"]`); m.remove();
      }
      closeAllOverlays();
    }

    // send
    function sendMessage(){
      const input=document.getElementById('messageInput');
      const msg=input.value.trim();
      if(msg){ alert('Message sent: '+msg); input.value=''; }
    }
    document.getElementById('messageInput').addEventListener('keypress',e=>{
      if(e.key==='Enter') sendMessage();
    });

    // close overlays
    document.addEventListener('click',e=>{
      if(!e.target.closest('.action-btn') && !e.target.closest('.more-menu') && !e.target.closest('.reaction-picker')){
        closeAllOverlays();
      }
      if(!e.target.closest('.emoji-inside') && !e.target.closest('.emoji-picker')){
        document.getElementById('emojiPicker').classList.remove('show');
      }
    });
  </script>
</body>
</html>
